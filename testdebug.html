<!DOCTYPE html>
<html>
<body>

<h2>JavaScript Array Sort</h2>
<p>The sort() method sorts an array alphabetically.</p>

<button onclick="myFunction()">Try it</button>

<pre id="demo"></pre>

<script>
var rawData = {
  "attributes": [
    {
      "attribute": "case.UnderwritingRegion",
      "valueAsString": "14cee142-116f-4b34-a4a2-fd94768fc222"
    },
    {
      "attribute": "case.CountryOfContract",
      "valueAsString": "1f087fa1-4b87-485e-88f5-de581e9440b7"
    },
    {
      "attribute": "case.ClientPresent",
      "valueAsString": "fc7610f9-7c80-4182-b815-a82bff28524c"
    },
    {
      "attribute": "case.ApplicationType",
      "valueAsString": "409f04e5-ff1f-4d64-8e79-e5ba1796243b"
    },
    {
      "attribute": "case.SalesBusinessSource",
      "valueAsString": "1b9dd477-cc36-4dfb-aa3f-cda0f98065a9"
    },
    {
      "attribute": "case.SalesChannel",
      "valueAsString": "1d08e6de-de44-4d48-83b4-b30a0d4c988f"
    },
    {
      "attribute": "case.Agency",
      "valueAsString": "00841117"
    },
    {
      "attribute": "case.VIPAgent",
      "valueAsString": "16fee183-8a2c-4a0c-87f4-dc6ff69f9d6a"
    },
    {
      "attribute": "case.CorporateAgency",
      "valueAsString": "16fee183-8a2c-4a0c-87f4-dc6ff69f9d6a"
    },
    {
      "attribute": "case.PremiumPaymentMode",
      "valueAsString": "faeddbd7-ef5d-4bbb-9952-b4f8a9d76c3d"
    },
    {
      "attribute": "case.ProposerRegularPremium",
      "valueAsString": 1
    },
    {
      "attribute": "case.ProposerSinglePremium",
      "valueAsString": 1
    },
    {
      "attribute": "case.PayorAnnualIncome",
      "valueAsString": 1
    },
    {
      "attribute": "case.ApplicationSignDate",
      "valueAsString": "07/02/2018"
    },
    {
      "attribute": "case.life[0].LifeID",
      "valueAsString": "LA15305329133176700841117"
    },
    {
      "attribute": "case.life[0].GivenName",
      "valueAsString": "Indah"
    },
    {
      "attribute": "case.life[0].Gender",
      "valueAsString": "618c52a5-da03-40c4-9494-c339ee221a9c"
    },
    {
      "attribute": "case.life[0].DateOfBirth",
      "valueAsString": "07/02/1994"
    },
    {
      "attribute": "case.life[0].InsuranceAge",
      "valueAsString": 24
    },
    {
      "attribute": "case.life[0].MaritalStatus",
      "valueAsString": "2836d692-1642-4b6d-978f-6f79287a4318"
    },
    {
      "attribute": "case.life[0].SmokingStatus",
      "valueAsString": "e2813798-35a9-4e2f-9715-f90ba5161413"
    },
    {
      "attribute": "case.life[0].Financial.AnnualIncome",
      "valueAsString": 1
    },
    {
      "attribute": "case.life[0].occupations[0].OccupationCode",
      "valueAsString": "cbb42d43-a41a-4af6-950e-7dc66afe80ef"
    },
    {
      "attribute": "case.life[0].Financial.TotalLIFESumAssuredThisCompany",
      "valueAsString": 1
    },
    {
      "attribute": "case.life[0].Financial.TotalCISumAssuredThisCompany",
      "valueAsString": 1
    },
    {
      "attribute": "case.life[0].Financial.TotalADBOrADDSumAssuredThisCompany",
      "valueAsString": 1
    },
    {
      "attribute": "case.life[0].Financial.TotalTPDSumAssuredThisCompany",
      "valueAsString": 1
    },
    {
      "attribute": "case.life[0].PreviousAdverseDecision.DeclinedOrPostponeRecordThisCompany",
      "valueAsString": "16fee183-8a2c-4a0c-87f4-dc6ff69f9d6a"
    },
    {
      "attribute": "case.life[0].PreviousAdverseDecision.SubStandardRecordThisCompany",
      "valueAsString": "16fee183-8a2c-4a0c-87f4-dc6ff69f9d6a"
    },
    {
      "attribute": "case.life[0].NonMedical.TotalLifeCoverAmountForRoutineMedicalEvaluation",
      "valueAsString": 1
    },
    {
      "attribute": "case.life[0].NonMedical.TotalCICoverAmountForRoutineMedicalEvaluation",
      "valueAsString": 1
    },
    {
      "attribute": "case.life[0].NonMedical.TotalPPHAmountCurrentApplicationForRoutineMedicalEvaluation",
      "valueAsString": 1
    },
    {
      "attribute": "case.life[0].ExistingSystemRecords.ImpairmentCodePresent",
      "valueAsString": "16fee183-8a2c-4a0c-87f4-dc6ff69f9d6a"
    },
    {
      "attribute": "case.life[0].ExistingSystemRecords.ClaimCodePresent",
      "valueAsString": "16fee183-8a2c-4a0c-87f4-dc6ff69f9d6a"
    },
    {
      "attribute": "case.life[0].product[0].benefit[10].amount",
      "valueAsString": 65000000
    },
    {
      "attribute": "case.life[0].product[0].benefit[2].type",
      "valueAsString": "0ca13a68-9c02-4e74-8f9b-f217c164a093"
    },
    {
      "attribute": "case.life[0].product[0].benefit[1].amount",
      "valueAsString": "916755840"
    }
  ]
}

function compare(a, b) {
  if (a < b) return -1;
  if (a > b) return 1;
  return 0;
}

function compareDeep2(a, b) {
  var tmpStra = a.attribute;
  var tmpStrb = b.attribute;

  var cleanA = tmpStra.match(/\[\d+/g);
  var cleanB = tmpStrb.match(/\[\d+/g);

  if (cleanA == null) return -1;
  if (cleanB == null) return 1;

  for (var i = 0; i < cleanA.length && i < cleanB.length; i++) {
    var aNum = parseInt(cleanA[i].slice(1));
    var bNum = parseInt(cleanB[i].slice(1));
    if (aNum < bNum) return -1;
    if (aNum > bNum) return 1;
  }

  if (cleanA.length !== cleanB.length)
    return compare(cleanA.length, cleanB.length);

  var tmpIgA = tmpStra.replace(/\[\d+\]/g, '');
  var tmpIgB = tmpStrb.replace(/\[\d+\]/g, '');

  return compare(tmpIgA, tmpIgB);
}

function myFunction() {
  var sorted = rawData.attributes.sort(compareDeep2);
  document.getElementById("demo").textContent = JSON.stringify(sorted, null, 2);
}
</script>

</body>
</html>
